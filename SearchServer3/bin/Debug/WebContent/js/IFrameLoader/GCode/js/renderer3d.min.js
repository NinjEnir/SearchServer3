GCODE.renderer3d=function(){var e,n,r,o,i,t,a=!1,c=0,d=0,E=0,l=500,s=350,u=70,p=l/s,w=.1,T=1e4,R=new THREE.PerspectiveCamera(u,p,w,T),f=(window.innerWidth/2,window.innerHeight/2,{showMoves:!0,colorLine:0,colorMove:65280,rendererType:"webgl"}),v=function(){t.update(),o.render(i,R),requestAnimationFrame(v)},m=function(n){var o,i=e[n];if(i)for(o=0;o<i.length;o++)i[o]&&(i[o].x||(i[o].x=c),i[o].y||(i[o].y=d),i[o].z||(i[o].z=E),i[o].extrude&&(r.vertices.push(new THREE.Vector3(c,d,E)),r.vertices.push(new THREE.Vector3(i[o].x,i[o].y,i[o].z))),c=i[o].x,d=i[o].y,E=i[o].z)},H=function(){var o;for(o=0;o<e.length;o+=1)m(o);var i=new THREE.LineBasicMaterial({color:f.colorLine,lineWidth:2,opacity:.6,fog:!1});r.computeBoundingBox(),n.add(new THREE.Line(r,i,THREE.LinePieces));var t=(new THREE.Vector3).add(r.boundingBox.min,r.boundingBox.max).divideScalar(2);n.position=t.multiplyScalar(-1)},y=function(e){function n(e,n,r){return new THREE.Vector3(e,n,r)}function r(e,n,r){var o,t=new THREE.Geometry,a=new THREE.LineBasicMaterial({color:r,lineWidth:1});t.vertices.push(e,n),o=new THREE.Line(t,a),i.add(o)}r(n(-e,0,0),n(e,0,0),16711680),r(n(0,-e,0),n(0,e,0),65280),r(n(0,0,-e),n(0,0,e),255)};return{init:function(){if(a=!1,"webgl"==f.rendererType)o=new THREE.WebGLRenderer({clearColor:16777215,clearAlpha:1});else{if("canvas"!=f.rendererType)return void console.log("unknown rendererType");o=new THREE.CanvasRenderer({clearColor:16777215,clearAlpha:1})}i=new THREE.Scene;var e=$("#3d_container");R.position.z=200,i.add(R),o.setSize(l,s),e.empty(),e.append(o.domElement),t=new THREE.TrackballControls(R,o.domElement),t.rotateSpeed=1,t.zoomSpeed=1.2,t.panSpeed=.8,t.noZoom=!1,t.noPan=!1,t.staticMoving=!0,t.dynamicDampingFactor=.3,t.keys=[65,83,68]},isModelReady:function(){return a},setOption:function(e){for(var n in e)e.hasOwnProperty(n)&&(f[n]=e[n])},setModel:function(n){e=n,a=!1},doRender:function(){if(c=0,d=0,E=0,n=new THREE.Object3D,r=new THREE.Geometry,this.init(),e){a=!0,H(),i.add(n),y(100);v()}}}}();